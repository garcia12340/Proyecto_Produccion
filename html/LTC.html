<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LTC</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!--=============== REMIXICONS ===============-->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.2.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/eoq.css">
</head>

<body>
    <!--=============== HEADER ===============-->
    <header class="header">
        <nav class="nav container">
            <div class="nav__data">
                <a href="../index.html" class="nav__logo">
                    <i class="ri-planet-line"></i> Company
                </a>

                <div class="nav__toggle" id="nav-toggle">
                    <i class="ri-menu-line nav__burger"></i>
                    <i class="ri-close-line nav__close"></i>
                </div>
            </div>

            <!--=============== NAV MENU ===============-->
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li><a href="../index.html" class="nav__link">Home</a></li>

                    <!--=============== DROPDOWN 1 ===============-->
                    <li class="dropdown__item">
                        <div class="nav__link">
                            Inventario <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                        </div>

                        <ul class="dropdown__menu">
                            <li>
                                <a href="../html/CMC.html" class="dropdown__link">
                                    <i class="ri-pie-chart-line"></i> Mantenimiento Correctivo
                                </a>
                            </li>

                            <li>
                                <a href="../html/EOQ.html" class="dropdown__link">
                                    <i class="ri-arrow-up-down-line"></i> EOQ
                                </a>
                            </li>

                            <!--=============== DROPDOWN SUBMENU ===============-->
                            <li class="dropdown__subitem">
                                <div class="dropdown__link">
                                    <i class="ri-bar-chart-line"></i> Control de Inventario <i
                                        class="ri-add-line dropdown__add"></i>
                                </div>

                                <ul class="dropdown__submenu">
                                    <li>
                                        <a href="../html/CFP.html" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Costo Fijo Por Pieza
                                        </a>
                                    </li>

                                    <li>
                                        <a href="../html/CPP.html" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Costo Promedio Por Pieza
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Refunds
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <!--=============== DROPDOWN 2 ===============-->
                    <li class="dropdown__item">
                        <div class="nav__link">
                            Analytics <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                        </div>

                        <ul class="dropdown__menu">
                            <li>
                                <a href="#" class="dropdown__link">
                                    <i class="ri-pie-chart-line"></i> Overview
                                </a>
                            </li>

                            <li>
                                <a href="#" class="dropdown__link">
                                    <i class="ri-arrow-up-down-line"></i> Transactions
                                </a>
                            </li>

                            <!--=============== DROPDOWN SUBMENU ===============-->
                            <li class="dropdown__subitem">
                                <div class="dropdown__link">
                                    <i class="ri-bar-chart-line"></i> Reports <i class="ri-add-line dropdown__add"></i>
                                </div>

                                <ul class="dropdown__submenu">
                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-file-list-line"></i> Documents
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-cash-line"></i> Payments
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Refunds
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>

                    </li>

                    <!--=============== DROPDOWN 3 ===============-->
                    <li class="dropdown__item">
                        <div class="nav__link">
                            LTC - LUC <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                        </div>

                        <ul class="dropdown__menu">
                            <li>
                                <a href="../html/LTC.html" class="dropdown__link">
                                    <i class="ri-pie-chart-line"></i> LTC
                                </a>
                            </li>

                            <li>
                                <a href="../html/LUC.html" class="dropdown__link">
                                    <i class="ri-arrow-up-down-line"></i> LUC
                                </a>
                            </li>

                            <!--=============== DROPDOWN SUBMENU ===============-->
                            <li class="dropdown__subitem">
                                <div class="dropdown__link">
                                    <i class="ri-bar-chart-line"></i> Control de Inventario <i
                                        class="ri-add-line dropdown__add"></i>
                                </div>

                                <ul class="dropdown__submenu">
                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Costo Fijo Por Pieza
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Costo Promedio Por Pieza
                                        </a>
                                    </li>

                                    <li>
                                        <a href="#" class="dropdown__sublink">
                                            <i class="ri-refund-2-line"></i> Refunds
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>

                    </li>

                    <!--=============== DROPDOWN 4 ===============-->
                    <li class="dropdown__item">
                        <div class="nav__link">
                            Users <i class="ri-arrow-down-s-line dropdown__arrow"></i>
                        </div>

                        <ul class="dropdown__menu">
                            <li>
                                <a href="#" class="dropdown__link">
                                    <i class="ri-user-line"></i> Profiles
                                </a>
                            </li>

                            <li>
                                <a href="#" class="dropdown__link">
                                    <i class="ri-lock-line"></i> Accounts
                                </a>
                            </li>

                            <li>
                                <a href="#" class="dropdown__link">
                                    <i class="ri-message-3-line"></i> Messages
                                </a>
                            </li>
                        </ul>
                    </li>

                    <li><a href="#" class="nav__link">Contact</a></li>
                </ul>
            </div>
        </nav>

    </header>

    <main>
        <h1>Método LTC</h1>
        <form id="ltcForm">
            <label for="numSemanas">Número de Semanas:</label>
            <input type="number" id="numSemanas" required><br>
            <label for="costoMantenimiento">Costo de Mantenimiento (K):</label>
            <input type="number" id="costoMantenimiento" required><br>
            <label for="recepcionPlaneada">Recepción Planeada:</label>
            <input type="number" id="recepcionPlaneada" required><br>
            <button type="button" onclick="agregarCampos()">Agregar Semanas</button>
        </form>
        <div id="semanasInputs"></div>
        <button type="button" onclick="calcularLTC()">Calcular LTC</button>
        <table id="resultadoLTC">
            <thead>
                <tr>
                    <th>Periodo</th>
                    <th>Unidades</th>
                    <th>Periodos mantenidos</th>
                    <th>Costo de Mantenimiento</th>
                    <th>Costo de mantenimiento acumulado</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </main>

    <!--=============== MAIN JS ===============-->
    <script>
        function agregarCampos() {
            const numSemanas = document.getElementById('numSemanas').value;
            const semanasInputs = document.getElementById('semanasInputs');
            semanasInputs.innerHTML = ''; // Limpiar campos previos

            for (let i = 1; i <= numSemanas; i++) {
                const input = document.createElement('input');
                input.type = 'number';
                input.id = 'semana' + i;
                input.placeholder = 'Requerimiento Semana ' + i;
                semanasInputs.appendChild(input);
            }
        }

        function calcularLTC() {
            const numSemanas = parseInt(document.getElementById('numSemanas').value);
            const K = parseFloat(document.getElementById('costoMantenimiento').value);
            const recepcionPlaneada = parseFloat(document.getElementById('recepcionPlaneada').value);
            const tbody = document.getElementById('resultadoLTC').getElementsByTagName('tbody')[0];
            tbody.innerHTML = ''; // Limpiar tabla anterior

            let costoAcumulado = 0;
            let periodosMantenidos = 0;
            let periodoActual = 1; // Iniciar contador de períodos en 1

            for (let i = 1; i <= numSemanas; i++) {
                const requerimiento = parseFloat(document.getElementById('semana' + i).value);
                const costoMantenimiento = requerimiento * periodosMantenidos * K;
                costoAcumulado += costoMantenimiento;

                const row = tbody.insertRow();
                const cellPeriodo = row.insertCell(0);
                const cellUnidades = row.insertCell(1);
                const cellMantenidos = row.insertCell(2);
                const cellCosto = row.insertCell(3);
                const cellCostoAcumulado = row.insertCell(4);

                cellPeriodo.textContent = periodoActual;
                cellUnidades.textContent = requerimiento;
                cellMantenidos.textContent = periodosMantenidos;
                cellCosto.textContent = costoMantenimiento.toFixed(2);
                cellCostoAcumulado.textContent = costoAcumulado.toFixed(2);

                if (costoAcumulado >= recepcionPlaneada) {
                    row.className = "highlight"; // Aplicar la clase highlight a la fila que sobrepasa la recepción planeada
                    periodosMantenidos = 0; // Restablecer los periodos mantenidos
                    costoAcumulado = 0; // Opcionalmente, restablecer costo acumulado
                    periodoActual = 1; // Restablecer el contador de período
                } else {
                    periodosMantenidos++; // Incrementar después de calcular el costo
                    periodoActual++; // Incrementar periodo para la siguiente iteración
                }
            }
        }
    </script>

</body>
</html>